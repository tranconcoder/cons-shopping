(()=>{"use strict";const t=(t,e=document)=>e.querySelector(t);new class{constructor(){this.currentImageIndex=0,this.TIME_CHANGE_IMAGE=1e4,this.imageSlideElm=t(".image-slide-ctn"),this.imageListElm=t(".image-list",this.imageSlideElm),this.progressBarElm=t(".progress-bar",this.imageSlideElm),this.prevButton=t(".prev-button",this.imageSlideElm),this.nextButton=t(".next-button",this.imageSlideElm),this.IMAGE_COUNT=this.imageListElm.childElementCount,this.listenEventButton(),this.setIntervalAutoChangeImage()}clearEventButton(){this.prevButton.removeEventListener("click",this.handlePrevImage.bind(this)),this.nextButton.removeEventListener("click",this.handleNextImage.bind(this)),this.progressBarElm.addEventListener("click",this.handleClickProgressBar.bind(this))}listenEventButton(){this.clearEventButton(),this.prevButton.addEventListener("click",this.handlePrevImage.bind(this)),this.nextButton.addEventListener("click",this.handleNextImage.bind(this)),this.progressBarElm.addEventListener("click",this.handleClickProgressBar.bind(this))}setIntervalAutoChangeImage(){clearInterval(Number(this.autoChangeImageIntervalId)),this.autoChangeImageIntervalId=setInterval(this.handleNextImage.bind(this),this.TIME_CHANGE_IMAGE)}handlePrevImage(){0===this.currentImageIndex?this.currentImageIndex=this.IMAGE_COUNT-1:this.currentImageIndex--,this.resetSlideStyle()}handleNextImage(){this.currentImageIndex===this.IMAGE_COUNT-1?this.currentImageIndex=0:this.currentImageIndex++,this.resetSlideStyle()}handleJumpImage(t){t>=this.IMAGE_COUNT&&(t=this.IMAGE_COUNT-1),t<0&&(t=0),this.currentImageIndex=t,this.resetSlideStyle()}resetSlideStyle(){this.setIntervalAutoChangeImage(),this.imageListElm.style.transform=`translateX(-${100*this.currentImageIndex}%)`,t(".dot.active",this.progressBarElm).classList.remove("active"),t(`.dot[data-index="${this.currentImageIndex}"`,this.imageSlideElm).classList.add("active")}handleClickProgressBar(t){const e=t.target;(null==e?void 0:e.hasAttribute("data-index"))&&this.handleJumpImage(Number(e.dataset.index))}};const e=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"});class i{static getCartList(){return JSON.parse(localStorage.getItem(this.CART_STORAGE_KEY)||"[]")}static addCart(t){const e=this.getCartList();e.push(t),localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(e))}}i.CART_STORAGE_KEY="cons_shopping_cart";const n=i;((t,e=document)=>e.querySelectorAll(t))(".popular-product-list button.add-to-cart").forEach((t=>{t.addEventListener("click",(()=>{n.addCart("123456")}))})),new class{constructor(){const t=this.initElement();this.popularProductList=[],this.popularProductItemList=[],this.popularProductCtn=t.popularProductCtn,this.initData()}initElement(){return{popularProductCtn:t(".popular-product-list")}}initEvent(){this.popularProductItemList.forEach((e=>{t("button.add-to-cart",e).addEventListener("click",(t=>{n.addCart(e.dataset.id)}))}))}initUI(){this.popularProductCtn.innerHTML="",this.popularProductItemList=this.popularProductList.map((t=>{const i=document.createElement("li");return i.classList.add("item-container"),i.dataset.id=t.productId,i.innerHTML=`\n                <div class="thumb-ctn">\n                    <img src="${t.thumb}" alt="" class="thumb" />\n                </div>\n\n                <p class="name">${t.label}</p>\n                <p class="price">${e.format(t.cost)}</p>\n\n                <div class="detail">\n                    <p class="memory">RAM: ${t.memory}</p>\n                    <p class="storage">ROM: ${t.storage}</p>\n                    <p class="monitor">Màn hình: ${t.monitorWidth}x${t.monitorHeight}</p>\n                    <p class="battery">Pin: 5000mah</p>\n                </div>\n\n\n                <div class="button-list">\n                    <button class="add-to-cart">\n                        <p><i class="fa-solid fa-cart-plus"></i></p>\n                    </button>\n\n                    <button class="buy-now">\n                        <p>Mua ngay</p>\n                    </button>\n                </div>\n            `,i})),this.popularProductItemList.forEach((t=>this.popularProductCtn.append(t)))}initData(){return t=this,e=void 0,n=function*(){this.popularProductList=yield fetch("/api/get-all-product").then((t=>t.json())),this.initUI(),this.initElement(),this.initEvent()},new((i=void 0)||(i=Promise))((function(s,a){function r(t){try{o(n.next(t))}catch(t){a(t)}}function l(t){try{o(n.throw(t))}catch(t){a(t)}}function o(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,l)}o((n=n.apply(t,e||[])).next())}));var t,e,i,n}}})();